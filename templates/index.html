<p id='demo'></p>
<p id='zone'></p>


<script>
    var x = document.getElementById("demo");

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }
    
    function showPosition(position) {
      if (position) {
        var lat = position.coords.latitude;
        var long = position.coords.longitude;

        // console.log(position);
        x.innerHTML = "Latitude: " + lat + "<br>Longitude: " + long;

        postRe(lat, long);
      }
    }

    getLocation();
    showPosition();

    function postRe(lat, long){
      var xhr = new XMLHttpRequest();

      // xhr.open("POST", '/', true);
      //Send the proper header information along with the request
      // xhr.setRequestHeader("Content-Type", "application/json");

      xhr.responseType = 'json';

      xhr.onreadystatechange = function() { // Call a function when the state changes.
          if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
      //         // Request finished. Do processing here.
            // alert(xhr.responseText);
            console.log(xhr.response);
            
          }
      }
      xhr.open("GET", `https://api.darksky.net/forecast/81363853dc336450b84e781b96c555d4/${lat},${long}`, true);

      // xhr.send(JSON.stringify({
      //   'lat': lat,
      //   'long': long,
      // }));
      xhr.send();
    }

    
</script>